<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Redefine"><meta name="description" content="Hexo Theme Redefine"><meta name="author" content="人生几何"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-redefine.png"><link rel="canonical" href="https://RenshengJi.github.io/2023/08/13/week7/"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta property="og:type" content="article"><meta property="og:title" content="人生几何的科研之旅——第七周周报"><meta property="og:description" content="Hexo Theme Redefine"><meta property="og:url" content="https://RenshengJi.github.io2023/08/13/week7/"><meta property="og:image" content="/images/redefine-logo.svg"><meta property="og:site_name" content="人生几何"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="人生几何的科研之旅——第七周周报"><meta name="twitter:description" content="Hexo Theme Redefine"><meta name="twitter:image" content="/images/redefine-logo.svg"><link rel="icon" type="image/png" href="/images/redefine-logo.svg" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-logo.svg"><meta name="theme-color" content="#005080"><link rel="shortcut icon" href="/images/redefine-logo.svg"><title>人生几何的科研之旅——第七周周报 - 人生几何</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/assets/fonts.css"><link rel="preconnect" href="https://evan.beee.top" crossorigin><script id="hexo-configurations">let REDEFINE=window.REDEFINE||{};REDEFINE.hexo_config={hostname:"renshengji.github.io",root:"/",language:"zh-CN",path:"search.xml"},REDEFINE.theme_config={toc:{enable:!0,number:!1,expand_all:!0,init_open:!0},style:{primary_color:"#005080",avatar:"/images/2.jpg",favicon:"/images/redefine-logo.svg",article_img_align:"center",right_side_width:"210px",content_max_width:"1000px",nav_color:{left:"#f78736",right:"#367df7",transparency:35},hover:{shadow:!0,scale:!1},first_screen:{enable:!0,background_image:{light:"https://evan.beee.top/img/wallhaven-wqery6-light.webp",dark:"https://evan.beee.top/img/wallhaven-wqery6-dark.webp"},title_color:{light:"#fff",dark:"#d1d1b6"},description:"人生几何，岁月如歌",custom_font:{enable:!1,font_family:null,font_url:null}},scroll:{progress_bar:{enable:!0},percent:{enable:!1}}},local_search:{enable:!0,preload:!0},code_block:{copy:!0,style:"mac",custom_font:{enable:!1,font_family:null,font_url:null}},pjax:{enable:!0},lazyload:{enable:!1},version:"1.2.1",friend_links:{columns:2},home_article:{date_format:"auto",category:{enable:!0,limit:3},tag:{enable:!0,limit:3}}},REDEFINE.language_ago={second:"%s 秒前",minute:"%s 分钟前",hour:"%s 小时前",day:"%s 天前",week:"%s 周前",month:"%s 个月前",year:"%s 年前"}</script><link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/fontawesome/brands.min.css"><link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/fontawesome/solid.min.css"><link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/fontawesome/regular.min.css"><meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><div class="progress-bar-container"><span class="scroll-progress-bar"></span> <span class="pjax-progress-bar"></span> <span class="pjax-progress-icon"><i class="fa-solid fa-circle-notch fa-spin"></i></span></div><main class="page-container"><div class="page-main-content"><div class="page-main-content-top"><header class="menu-wrapper"><div class="menu-content"><div class="left"><a class="logo-title" href="/">人生几何</a></div><div class="right"><div class="pc"><ul class="menu-list"><li class="menu-item"><a href="/"><i class="fa-regular fa-house"></i> 首页</a></li><li class="menu-item"><a href="/categories"><i class="fa-regular fa-archive"></i> 归档</a></li><li class="menu-item"><a href="/playlists"><i class="fa-regular fa-archive"></i> 关于</a></li><li class="menu-item"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-regular fa-link"></i> 友链&nbsp;<i class="fa-solid fa-chevron-down"></i></a><ul class="sub-menu"><li><a href="/link1">LINK1</a></li><li><a href="/link2">LINK2</a></li><li><a href="/link3">LINK3</a></li></ul></li><li class="menu-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div><div class="icon-item menu-bar"><div class="menu-bar-middle"></div></div></div></div></div><div class="menu-drawer"><ul class="drawer-menu-list"><li class="drawer-menu-item flex-center"><a href="/"><i class="fa-regular fa-house"></i> 首页</a></li><li class="drawer-menu-item flex-center"><a href="/categories"><i class="fa-regular fa-archive"></i> 归档</a></li><li class="drawer-menu-item flex-center"><a href="/playlists"><i class="fa-regular fa-archive"></i> 关于</a></li><li class="drawer-menu-item flex-center"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-regular fa-link"></i> 友链&nbsp;<i class="fa-solid fa-chevron-down"></i></a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/link1">LINK1</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/link2">LINK2</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/link3">LINK3</a></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle"><div class="main-content"><div class="fade-in-down-animation"><div class="post-page-container"><div class="article-content-container"><div class="article-title"><img src="/images/4/2.png" alt="人生几何的科研之旅——第七周周报"><h1 class="article-title-cover">人生几何的科研之旅——第七周周报</h1></div><div class="article-header"><div class="avatar"><img src="/images/2.jpg"></div><div class="info"><div class="author"><span class="name">人生几何</span> <span class="author-label">lol</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="pc">2023-08-13 21:03</span> <span class="mobile">2023-08-13 21</span> <span class="hover-info">创建时间</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="pc">2023-08-13 21:09:14</span> <span class="mobile">2023-08-13 21:09</span> <span class="hover-info">更新时间</span> </span><span class="article-categories article-meta-item"><i class="fa-regular fa-folders"></i>&nbsp;<ul><li><a href="/categories/%E7%A7%91%E7%A0%94/">科研</a>&nbsp;</li><li>&gt; <a href="/categories/%E7%A7%91%E7%A0%94/FSOR/">FSOR</a>&nbsp;</li></ul></span><span class="article-tags article-meta-item"><i class="fa-regular fa-tags"></i>&nbsp;<ul><li><a href="/tags/%E7%A7%91%E7%A0%94/">科研</a>&nbsp;</li></ul></span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h2 id="Yolov5模型修改-来源于Robomaster比赛的实际需求"><a href="#Yolov5模型修改-来源于Robomaster比赛的实际需求" class="headerlink" title="Yolov5模型修改(来源于Robomaster比赛的实际需求)"></a>Yolov5模型修改(来源于Robomaster比赛的实际需求)</h2><p><strong>目的</strong>：修改网络的输出为四边形四个角点的坐标，而不是只能输出一个矩形！</p><h3 id="1-数据集格式处理"><a href="#1-数据集格式处理" class="headerlink" title="1.数据集格式处理"></a>1.数据集格式处理</h3><p>这里我们选用上海交通大学RM云汉交龙战队提供的四点模型数据集<a class="link" target="_blank" rel="noopener" href="https://github.com/xinyang-go/LabelRoboMaster">标注工具 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>进行数据的标注（<strong>交</strong>!），可以直接得到yolo所需的标签格式，所以我们只需要进行train/val/test的划分，以及train.txt，val.txt的构造！</p><ul><li><p>首先请创建一个总文件夹datasets，在其下创建图片文件夹image，标签文件夹label</p></li><li><p>train/val/test的划分</p></li></ul><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line"><span class="comment">#label文件的地址，根据自己的数据进行修改 xml一般存放在Annotations下</span></span><br><span class="line">parser.add_argument(<span class="string">'--xml_path'</span>, default=<span class="string">'label'</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">'input xml label path'</span>)</span><br><span class="line"><span class="comment">#数据集的划分，地址选择自己数据下的ImageSets/Main</span></span><br><span class="line">parser.add_argument(<span class="string">'--txt_path'</span>, default=<span class="string">'ImageSets/Main'</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">'output txt label path'</span>)</span><br><span class="line">opt = parser.parse_args()</span><br><span class="line"></span><br><span class="line">trainval_percent = <span class="number">1.0</span>  <span class="comment"># 训练集和验证集所占比例。 这里没有划分测试集</span></span><br><span class="line">train_percent = <span class="number">0.9</span>     <span class="comment"># 训练集所占比例，可自己进行调整</span></span><br><span class="line">xmlfilepath = opt.xml_path</span><br><span class="line">txtsavepath = opt.txt_path</span><br><span class="line">total_xml = os.listdir(xmlfilepath)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(txtsavepath):</span><br><span class="line">    os.makedirs(txtsavepath)</span><br><span class="line"></span><br><span class="line">num = <span class="built_in">len</span>(total_xml)</span><br><span class="line">list_index = <span class="built_in">range</span>(num)</span><br><span class="line">tv = <span class="built_in">int</span>(num * trainval_percent)</span><br><span class="line">tr = <span class="built_in">int</span>(tv * train_percent)</span><br><span class="line">trainval = random.sample(list_index, tv)</span><br><span class="line">train = random.sample(trainval, tr)</span><br><span class="line"></span><br><span class="line">file_trainval = <span class="built_in">open</span>(txtsavepath + <span class="string">'/trainval.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">file_test = <span class="built_in">open</span>(txtsavepath + <span class="string">'/test.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">file_train = <span class="built_in">open</span>(txtsavepath + <span class="string">'/train.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">file_val = <span class="built_in">open</span>(txtsavepath + <span class="string">'/val.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> list_index:</span><br><span class="line">    name = total_xml[i][:-<span class="number">4</span>] + <span class="string">'\n'</span></span><br><span class="line">    <span class="keyword">if</span> i <span class="keyword">in</span> trainval:</span><br><span class="line">        file_trainval.write(name)</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> train:</span><br><span class="line">            file_train.write(name)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            file_val.write(name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        file_test.write(name)</span><br><span class="line"></span><br><span class="line">file_trainval.close()</span><br><span class="line">file_train.close()</span><br><span class="line">file_val.close()</span><br><span class="line">file_test.close()</span><br></pre></td></tr></table></figure></div><ul><li>train.txt，val.txt的构造</li></ul><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> getcwd</span><br><span class="line"></span><br><span class="line">sets = [<span class="string">'train'</span>, <span class="string">'val'</span>, <span class="string">'test'</span>]</span><br><span class="line">abs_path = os.getcwd()</span><br><span class="line"><span class="built_in">print</span>(abs_path)</span><br><span class="line"></span><br><span class="line">wd = getcwd()</span><br><span class="line"><span class="keyword">for</span> image_set <span class="keyword">in</span> sets:</span><br><span class="line">    image_ids = <span class="built_in">open</span>(abs_path + <span class="string">'/ImageSets/Main/%s.txt'</span> % (image_set)).read().strip().split()</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(abs_path + <span class="string">'/dataSet_path/'</span>):</span><br><span class="line">        os.makedirs(abs_path + <span class="string">'/dataSet_path/'</span>)</span><br><span class="line">     </span><br><span class="line">    list_file = <span class="built_in">open</span>(<span class="string">'dataSet_path/%s.txt'</span> % (image_set), <span class="string">'w'</span>)</span><br><span class="line">    <span class="keyword">for</span> image_id <span class="keyword">in</span> image_ids:</span><br><span class="line">        list_file.write(abs_path + <span class="string">'/image/%s.jpg\n'</span> % (image_id))</span><br><span class="line">    list_file.close()</span><br></pre></td></tr></table></figure></div><h3 id="2-数据集读取处理（dataloaders-py）"><a href="#2-数据集读取处理（dataloaders-py）" class="headerlink" title="2.数据集读取处理（dataloaders.py）"></a>2.数据集读取处理（dataloaders.py）</h3><p><strong>重要参考</strong>：<a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38253797/article/details/119904518">yolov5 dataloaders.py源码解析 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p><p>由于yolov5中有<strong>segment</strong>实例分割的功能，而该功能所需要的标签txt文件的格式<strong>恰好</strong>就是交龙四点模型的格式！（毕竟实例分割也是由许多点围成的！），所以我们可以直接进行利用，避免重复造轮子</p><ul><li><p>四点信息存储(<strong>verify_image_label</strong>方法)</p><p>可以发现，在读取txt标签文件的信息时，若<strong>任意</strong>一行的元素个数<strong>大于6</strong>（如果是纯目标检测+分类，没有实例分割的话，一行应该是5个元素，class+xywh，大于6的话说明这一行是实例分割的数据！），则认为该txt标签文件为实例分割的，并将这些点都存到segments里！所以说，我们以后要关键点的话，直接<strong>调用</strong>segments就可以了！</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> os.path.isfile(lb_file):</span><br><span class="line">            nf = <span class="number">1</span>  <span class="comment"># label found</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(lb_file) <span class="keyword">as</span> f:</span><br><span class="line">                lb = [x.split() <span class="keyword">for</span> x <span class="keyword">in</span> f.read().strip().splitlines() <span class="keyword">if</span> <span class="built_in">len</span>(x)]</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">any</span>(<span class="built_in">len</span>(x) &gt; <span class="number">6</span> <span class="keyword">for</span> x <span class="keyword">in</span> lb):  <span class="comment"># is segment</span></span><br><span class="line">                    classes = np.array([x[<span class="number">0</span>] <span class="keyword">for</span> x <span class="keyword">in</span> lb], dtype=np.float32)</span><br><span class="line">                    segments = [np.array(x[<span class="number">1</span>:], dtype=np.float32).reshape(-<span class="number">1</span>, <span class="number">2</span>) <span class="keyword">for</span> x <span class="keyword">in</span> lb]  <span class="comment"># (cls, xy1...)</span></span><br><span class="line">                    <span class="comment"># print(segments[0].shape)</span></span><br><span class="line">                    lb = np.concatenate((classes.reshape(-<span class="number">1</span>, <span class="number">1</span>), segments2boxes(segments)), <span class="number">1</span>)  <span class="comment"># (cls, xywh)</span></span><br><span class="line">                lb = np.array(lb, dtype=np.float32)</span><br></pre></td></tr></table></figure></div></li><li><p>得到<strong>图像变换</strong>（由于数据增强、letterbox等操作）后关键点的最终坐标（__getitem__方法）</p><ul><li><p>letterbox操作导致的segments变换</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">segments = self.segments[index].copy()</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(segments):</span><br><span class="line">   <span class="keyword">for</span> i_s <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(segments)):</span><br><span class="line">   segments[i_s] = xyn2xy(</span><br><span class="line">       segments[i_s],</span><br><span class="line">       ratio[<span class="number">0</span>] * w,</span><br><span class="line">       ratio[<span class="number">1</span>] * h,</span><br><span class="line">       padw=pad[<span class="number">0</span>],</span><br><span class="line">       padh=pad[<span class="number">1</span>],</span><br><span class="line">   )</span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">xyn2xy</span>(<span class="params">x, w=<span class="number">640</span>, h=<span class="number">640</span>, padw=<span class="number">0</span>, padh=<span class="number">0</span></span>):</span><br><span class="line">    <span class="comment"># Convert normalized segments into pixel segments, shape (n,2)</span></span><br><span class="line">    y = x.clone() <span class="keyword">if</span> <span class="built_in">isinstance</span>(x, torch.Tensor) <span class="keyword">else</span> np.copy(x)</span><br><span class="line">    y[..., <span class="number">0</span>] = (w * x[..., <span class="number">0</span>] + padw)/(w+padw)  <span class="comment"># top left x</span></span><br><span class="line">    y[..., <span class="number">1</span>] = (h * x[..., <span class="number">1</span>] + padh)/(h+padh)  <span class="comment"># top left y</span></span><br><span class="line">    <span class="keyword">return</span> y</span><br></pre></td></tr></table></figure></div></li><li><p>数据增强操作导致的segments变换（注意相应的修改random_perspective方法<strong>引用源</strong>）</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> self.augment:</span><br><span class="line">       img, labels, segments = random_perspective(img,</span><br><span class="line">                                                  labels,</span><br><span class="line">                                                  segments=segments,</span><br><span class="line">                                                  degrees=hyp[<span class="string">'degrees'</span>],</span><br><span class="line">                                     							translate=hyp[<span class="string">'translate'</span>],</span><br><span class="line">                                                  scale=hyp[<span class="string">'scale'</span>],</span><br><span class="line">                                                  shear=hyp[<span class="string">'shear'</span>],</span><br><span class="line">                       														perspective=hyp[<span class="string">'perspective'</span>])</span><br></pre></td></tr></table></figure></div></li><li><p>修改函数返回值，增加segments</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> torch.from_numpy(img), labels_out, self.im_files[index], shapes, segments</span><br></pre></td></tr></table></figure></div></li></ul></li></ul><h3 id="3-数据集加载处理（dataloaders-py-train-py-val-py）"><a href="#3-数据集加载处理（dataloaders-py-train-py-val-py）" class="headerlink" title="3.数据集加载处理（dataloaders.py,train.py,val.py）"></a>3.数据集加载处理（dataloaders.py,train.py,val.py）</h3><p><strong>重要参考</strong>：<a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38253797/article/details/119904518">yolov5 dataloaders.py源码解析 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p><ul><li><p>修改collate_fn函数，使得batchsize能够把segments给打包上(<strong>collate_fn</strong>方法)</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">collate_fn</span>(<span class="params">batch</span>):</span><br><span class="line">      im, label, path, shapes, segments= <span class="built_in">zip</span>(*batch)  <span class="comment"># transposed</span></span><br><span class="line">      <span class="keyword">for</span> i, lb <span class="keyword">in</span> <span class="built_in">enumerate</span>(label):</span><br><span class="line">          lb[:, <span class="number">0</span>] = i  <span class="comment"># add target image index for build_targets()</span></span><br><span class="line">      <span class="keyword">return</span> torch.stack(im, <span class="number">0</span>), torch.cat(label, <span class="number">0</span>), path, shapes, torch.cat(torch.from_numpy(segments), <span class="number">0</span>)</span><br></pre></td></tr></table></figure></div><p>注意由于segments和label是一一对应的！故我们对segments也进行cat操作，便于后续处理</p></li><li><p>修改batchsize的加载pbar(<strong>train</strong>方法，val方法)</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, (imgs, targets, paths, _, segments) <span class="keyword">in</span> pbar:</span><br><span class="line"><span class="keyword">for</span> batch_i, (im, targets, paths, shapes, segments) <span class="keyword">in</span> <span class="built_in">enumerate</span>(pbar):</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="4-模型结构，主要是检测头修改（yolo-py-detect类）"><a href="#4-模型结构，主要是检测头修改（yolo-py-detect类）" class="headerlink" title="4.模型结构，主要是检测头修改（yolo.py detect类）"></a>4.模型结构，主要是检测头修改（yolo.py detect类）</h3><p><strong>重要参考1</strong>：<a class="link" target="_blank" rel="noopener" href="https://github.com/HuKai97/yolov5-5.x-annotations/blob/main/models/yolo.py#L34">带注释版的yolov5 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p><p><strong>重要参考2</strong>：<a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_39237205/article/details/126363554">【YOLOV5-6.x讲解】模型搭建模块 models/yolo.py <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p><ul><li><p>修改number of outputs per anchor (<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align:-.05ex" xmlns="http://www.w3.org/2000/svg" width="5.782ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2555.6 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mo" transform="translate(777.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(2055.6,0)"><path data-c="39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path></g></g></g></svg></mjx-container>) (<strong>init</strong>方法)</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, nc=<span class="number">80</span>, anchors=(<span class="params"></span>), ch=(<span class="params"></span>), inplace=<span class="literal">True</span></span>):  <span class="comment"># detection layer</span></span><br><span class="line">      <span class="built_in">super</span>().__init__()</span><br><span class="line">      self.nc = nc  <span class="comment"># number of classes</span></span><br><span class="line">      self.no = nc + <span class="number">9</span>  <span class="comment"># number of outputs per anchor</span></span><br></pre></td></tr></table></figure></div></li><li><p>修改检测头推理时前向传播过程（<strong>forward</strong>方法）</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xy1, xy2, xy3, xy4, conf = x[i].sigmoid().split((<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, self.nc + <span class="number">1</span>), <span class="number">4</span>)</span><br><span class="line">xy1 = (xy1 * <span class="number">2</span> + self.grid[i]) * self.stride[i]  <span class="comment"># xy1</span></span><br><span class="line">xy2 = (xy2 * <span class="number">2</span> + self.grid[i]) * self.stride[i]  <span class="comment"># xy2</span></span><br><span class="line">xy3 = (xy3 * <span class="number">2</span> + self.grid[i]) * self.stride[i]  <span class="comment"># xy3</span></span><br><span class="line">xy4 = (xy4 * <span class="number">2</span> + self.grid[i]) * self.stride[i]  <span class="comment"># xy4</span></span><br><span class="line"><span class="comment"># wh = (wh * 2) ** 2 * self.anchor_grid[i]  # wh</span></span><br><span class="line">y = torch.cat((xy1, xy2, xy3, xy4, conf), <span class="number">4</span>)</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="5-loss计算修改"><a href="#5-loss计算修改" class="headerlink" title="5.loss计算修改"></a>5.loss计算修改</h3><ul><li><p>首先是在train.py和val.py中，将computeloss函数的输入加上segments</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">loss, loss_items = compute_loss(pred, targets.to(device), segments.to(device))  <span class="comment"># loss scaled by batch_size</span></span><br><span class="line"></span><br><span class="line">segments = segments.to(device)</span><br><span class="line">loss += compute_loss(train_out, targets, segments)[<span class="number">1</span>]  <span class="comment"># box, obj, cls</span></span><br></pre></td></tr></table></figure></div></li><li><p>接着在loss.py中，将computeloss函数的输入加上segments</p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, p, targets, segments</span>):</span><br></pre></td></tr></table></figure></div></li><li><p>值得注意的是，我们并<strong>不需要修改build_targets</strong>函数（其作用是给每一个target分配一个grid，原本的build_targets函数需要知道target的x,y,w,h标签，但很好的是，虽然说上交四点模型的标签只有xy1,xy2,xy3,xy4，但是yolov5给我们根据这些点拟合出了一个矩形，虽然说人家本来是想用在实例分割里面的，但是凑巧了，咱这里也可以用）</p></li><li><p>未完</p></li></ul><h3 id="6-detect推理出的图片修改"><a href="#6-detect推理出的图片修改" class="headerlink" title="6.detect推理出的图片修改"></a>6.detect推理出的图片修改</h3><ul><li>未完</li></ul><h2 id="装甲板目标检测-分类实验结果分析"><a href="#装甲板目标检测-分类实验结果分析" class="headerlink" title="装甲板目标检测+分类实验结果分析"></a>装甲板目标检测+分类实验结果分析</h2><p><img src="/images/5/1.png" alt="1"></p><ul><li>暂未分析到结果</li></ul><h2 id="调研大模型的提示学习"><a href="#调研大模型的提示学习" class="headerlink" title="调研大模型的提示学习"></a>调研大模型的提示学习</h2><h3 id="Learning-Transferable-Visual-Models-From-Natural-Language-Supervision（CLIP）"><a href="#Learning-Transferable-Visual-Models-From-Natural-Language-Supervision（CLIP）" class="headerlink" title="Learning Transferable Visual Models From Natural Language Supervision（CLIP）"></a>Learning Transferable Visual Models From Natural Language Supervision（CLIP）</h3><p>没什么好说的，框架图一目了然</p><p><img src="/images/5/4.png" alt="1"></p><h3 id="Learning-to-Prompt-for-Vision-Language-Models（CoOp）"><a href="#Learning-to-Prompt-for-Vision-Language-Models（CoOp）" class="headerlink" title="Learning to Prompt for Vision-Language Models（CoOp）"></a>Learning to Prompt for Vision-Language Models（CoOp）</h3><p>同上，没什么好说的，框架图一目了然（说明了一篇论文有一个好的框架图有多么重要！）</p><img src="/images/5//5.png" alt="1" style="zoom:50%"><h2 id="学习开放集识别实验设置"><a href="#学习开放集识别实验设置" class="headerlink" title="学习开放集识别实验设置"></a>学习开放集识别实验设置</h2><p>鸽了</p></div><ul class="post-tags-box"><li class="tag-item"><a href="/tags/%E7%A7%91%E7%A0%94/">#科研</a>&nbsp;</li></ul><div class="article-nav"><div class="article-next"><a class="next" rel="next" href="/2023/08/06/week6/"><span class="title flex-center"><span class="post-nav-title-item">人生几何的科研之旅——第六周周报</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div><div class="comment-container"><div class="comments-container"><div id="comment-anchor"></div><div class="comment-area-title"><i class="fa-solid fa-comments"></i>&nbsp;评论</div><div id="waline"></div><script type="module" data-pjax>import{init}from"https://evan.beee.top/js/waline.mjs";function loadWaline(){init({el:"#waline",serverURL:"blog-comment-mu-amber.vercel.app",lang:"zh-CN",dark:'body[class~="dark-mode"]',requiredMeta:["nick","mail"]})}{const e=setTimeout(()=>{loadWaline(),clearTimeout(e)},1e3)}</script></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">此页目录</div><div class="page-title">人生几何的科研之旅——第七周周报</div><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Yolov5%E6%A8%A1%E5%9E%8B%E4%BF%AE%E6%94%B9-%E6%9D%A5%E6%BA%90%E4%BA%8ERobomaster%E6%AF%94%E8%B5%9B%E7%9A%84%E5%AE%9E%E9%99%85%E9%9C%80%E6%B1%82"><span class="nav-text">Yolov5模型修改(来源于Robomaster比赛的实际需求)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%BC%E5%BC%8F%E5%A4%84%E7%90%86"><span class="nav-text">1.数据集格式处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%95%B0%E6%8D%AE%E9%9B%86%E8%AF%BB%E5%8F%96%E5%A4%84%E7%90%86%EF%BC%88dataloaders-py%EF%BC%89"><span class="nav-text">2.数据集读取处理（dataloaders.py）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E9%9B%86%E5%8A%A0%E8%BD%BD%E5%A4%84%E7%90%86%EF%BC%88dataloaders-py-train-py-val-py%EF%BC%89"><span class="nav-text">3.数据集加载处理（dataloaders.py,train.py,val.py）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%A8%A1%E5%9E%8B%E7%BB%93%E6%9E%84%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%98%AF%E6%A3%80%E6%B5%8B%E5%A4%B4%E4%BF%AE%E6%94%B9%EF%BC%88yolo-py-detect%E7%B1%BB%EF%BC%89"><span class="nav-text">4.模型结构，主要是检测头修改（yolo.py detect类）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-loss%E8%AE%A1%E7%AE%97%E4%BF%AE%E6%94%B9"><span class="nav-text">5.loss计算修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-detect%E6%8E%A8%E7%90%86%E5%87%BA%E7%9A%84%E5%9B%BE%E7%89%87%E4%BF%AE%E6%94%B9"><span class="nav-text">6.detect推理出的图片修改</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A3%85%E7%94%B2%E6%9D%BF%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B-%E5%88%86%E7%B1%BB%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90"><span class="nav-text">装甲板目标检测+分类实验结果分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%A0%94%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%8F%90%E7%A4%BA%E5%AD%A6%E4%B9%A0"><span class="nav-text">调研大模型的提示学习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Learning-Transferable-Visual-Models-From-Natural-Language-Supervision%EF%BC%88CLIP%EF%BC%89"><span class="nav-text">Learning Transferable Visual Models From Natural Language Supervision（CLIP）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Learning-to-Prompt-for-Vision-Language-Models%EF%BC%88CoOp%EF%BC%89"><span class="nav-text">Learning to Prompt for Vision-Language Models（CoOp）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E5%BC%80%E6%94%BE%E9%9B%86%E8%AF%86%E5%88%AB%E5%AE%9E%E9%AA%8C%E8%AE%BE%E7%BD%AE"><span class="nav-text">学习开放集识别实验设置</span></a></li></ol></div></div></div></div></div></div></div><div class="page-main-content-bottom"><footer class="footer"><div class="info-container"><div class="copyright-info">&copy; <span>2023</span> - 2023&nbsp;&nbsp;<i class="fa-regular fa-computer-classic"></i>&nbsp;&nbsp;<a href="/">人生几何</a></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span></span></div><div class="theme-info info-item"><span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span><br><span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v1.2.1</a></span></div><div id="start_time_div" style="display:none">2023/2/28 22:00:00</div><div>博客已运行 <span class="odometer" id="runtime_days"></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒</div><script async data-pjax>try{function odometer_init(){document.querySelectorAll(".odometer").forEach(e=>{new Odometer({el:e,format:"( ddd).dd",duration:200})})}odometer_init()}catch(e){}</script></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li><li class="go-comment"><i class="fa-regular fa-comments"></i></li></ul></div></div><div class="right-bottom-side-tools"><div class="side-tools-container"><ul class="unfolded-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-expand-width flex-center"><i class="fa-regular fa-expand"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools tool-scroll-to-top flex-center"><i class="fa-regular fa-arrow-up"></i></li><li class="right-bottom-tools tool-scroll-to-bottom flex-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="folded-tools-list"><li class="right-bottom-tools tool-toggle-show flex-center"><i class="fa-regular fa-cog fa-spin"></i></li></ul></div></div><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fa-solid fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa-solid fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/utils.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/main.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/layouts/menu-shrink.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/tools/go-top-bottom.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/tools/dark-light-toggle.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/tools/local-search.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/tools/code-block.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/tools/runtime.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/layouts/odometer.min.js"></script><link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/assets/odometer-theme-minimal.css"><div class="post-scripts pjax"><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/tools/toc-toggle.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/libs/anime.min.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/layouts/toc.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/plugins/tabs.js"></script></div><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.2.1/source/js/libs/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",()=>{window.pjax=new Pjax({selectors:["head title",".page-container",".pjax"],history:!0,debug:!1,cacheBust:!1,timeout:0,analytics:!1,currentUrlFullReload:!1,scrollRestoration:!1}),document.addEventListener("pjax:send",()=>{REDEFINE.utils.pjaxProgressBarStart()}),document.addEventListener("pjax:complete",()=>{REDEFINE.utils.pjaxProgressBarEnd(),window.pjax.executeScripts(document.querySelectorAll("script[data-pjax], .pjax script")),REDEFINE.refresh()})})</script></body></html>